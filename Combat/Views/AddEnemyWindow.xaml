<Window x:Class="Combat.Views.AddEnemyWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Add Enemy" 
        Width="420" 
        Height="480" 
        Background="{StaticResource BackgroundDark}"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        FontFamily="Segoe UI">

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Search Box -->
        <Border Grid.Row="0" 
                Background="{StaticResource SurfaceDark}"
                BorderBrush="{StaticResource BorderDark}"
                BorderThickness="1"
                CornerRadius="6"
                Padding="4">

            <Grid>
                <TextBox x:Name="txtSearch"
                         Background="Transparent"
                         BorderThickness="0"
                         Foreground="{StaticResource TextPrimaryDark}"
                         CaretBrush="{StaticResource PrimaryAccent}"
                         SelectionBrush="{StaticResource PrimaryAccent}"
                         Padding="8,6"
                         FontSize="14"
                         VerticalContentAlignment="Center"/>

                <!-- Placeholder simulation -->
                <TextBlock Text="Search unit name..."
                           Foreground="{StaticResource TextSecondaryDark}"
                           FontSize="14"
                           VerticalAlignment="Center"
                           Margin="8,0,0,0"
                           IsHitTestVisible="False">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Text, ElementName=txtSearch}" Value="">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                            <Setter Property="Visibility" Value="Collapsed"/>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </Grid>
        </Border>

        <!-- ListBox -->
        <Border Grid.Row="1" 
                Margin="0,12,0,12"
                Background="{StaticResource SurfaceDark}"
                BorderBrush="{StaticResource BorderDark}"
                BorderThickness="1"
                CornerRadius="6"
                Padding="4">

            <ListBox x:Name="lbUnits"
                     Background="Transparent"
                     BorderThickness="0"
                     Foreground="{StaticResource TextPrimaryDark}"
                     ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="Padding" Value="12,8"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="{StaticResource TextPrimaryDark}"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListBoxItem">
                                    <Border x:Name="Bd"
                                            Background="{TemplateBinding Background}"
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="0"
                                            CornerRadius="4"
                                            SnapsToDevicePixels="True">
                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                         VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                         Margin="{TemplateBinding Padding}"
                                                         SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="{StaticResource PrimaryAccent}"/>
                                            <Setter TargetName="Bd" Property="Opacity" Value="0.25"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="#22FFFFFF"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListBox.ItemContainerStyle>

                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}"
                                   FontSize="14"
                                   VerticalAlignment="Center"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>

            </ListBox>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom">

            <Button Content="Cancel"
                    Width="100"
                    Height="36"
                    Margin="0,0,12,0"
                    Background="{StaticResource DeleteRed}"
                    Foreground="White"
                    BorderThickness="0"
                    FontWeight="SemiBold"
                    Click="BtnCancel_Click"/>

            <Button Content="Add Selected"
                    Width="140"
                    Height="36"
                    Background="{StaticResource PrimaryAccent}"
                    Foreground="Black"
                    BorderThickness="0"
                    FontWeight="SemiBold"
                    Click="BtnOK_Click"/>
        </StackPanel>

    </Grid>
</Window>